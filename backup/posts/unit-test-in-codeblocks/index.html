<!doctype html> <html prefix='og: http://ogp.me/ns#'> <head> <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50389098-1', 'auto');
  ga('send', 'pageview');
</script> <meta name=viewport content="width=device-width, initial-scale=1"> <meta charset=utf-8 /> <meta name=title content="åœ¨ Code::Blocks é–‹é–‹å¿ƒå¿ƒ Unit Test | ws://wildsky.cc"/> <meta name=description content="æœ€è¿‘è»Ÿé«”å·¥ç¨‹åœ¨æ•™å–®å…ƒæ¸¬è©¦ï¼ˆUnit Testï¼‰ï¼Œå¯æ˜¯å› ç‚ºè€å¸«æ˜¯ C# æˆ°å£«ï¼Œ æ‰€ä»¥æˆ‘å€‘å­¸çš„å°±æ˜¯ç”¨ Visual Studio çš„å…§å»ºæ¸¬è©¦ä¾†æ¸¬ C#ï¼Œä½†æˆ‘åˆä¸å¯« C#ï¼ï¼ æ–¼æ˜¯ä¹ï¼Œé€™å…©å€‹ç¦®æ‹œå°±ç˜‹ç‹‚..."/> <meta property="og:type" content=article /> <meta property="og:site_name" content="åœ¨ Code::Blocks é–‹é–‹å¿ƒå¿ƒ Unit Test"/> <meta property="og:locale" content=zh_TW /> <meta property="og:url" content="http://blog.wildsky.cc/posts/unit-test-in-codeblocks/"/> <meta property="og:image" content="http://blog.wildsky.cc/images/wildsky_main_pic.jpg"/> <meta property="og:title" content="åœ¨ Code::Blocks é–‹é–‹å¿ƒå¿ƒ Unit Test | ws://wildsky.cc"/> <meta property="og:description" content="æœ€è¿‘è»Ÿé«”å·¥ç¨‹åœ¨æ•™å–®å…ƒæ¸¬è©¦ï¼ˆUnit Testï¼‰ï¼Œå¯æ˜¯å› ç‚ºè€å¸«æ˜¯ C# æˆ°å£«ï¼Œ æ‰€ä»¥æˆ‘å€‘å­¸çš„å°±æ˜¯ç”¨ Visual Studio çš„å…§å»ºæ¸¬è©¦ä¾†æ¸¬ C#ï¼Œä½†æˆ‘åˆä¸å¯« C#ï¼ï¼ æ–¼æ˜¯ä¹ï¼Œé€™å…©å€‹ç¦®æ‹œå°±ç˜‹ç‹‚..."/> <meta property="fb:app_id" content=1521058658143315 /> <meta property='article:author' content='https://www.facebook.com/wi1d5ky'/> <meta name="twitter:card" content=summary /> <meta name="twitter:site" content="@wildskyf"/> <meta name="twitter:title" content="åœ¨ Code::Blocks é–‹é–‹å¿ƒå¿ƒ Unit Test | ws://wildsky.cc"/> <meta name="twitter:description" content="æœ€è¿‘è»Ÿé«”å·¥ç¨‹åœ¨æ•™å–®å…ƒæ¸¬è©¦ï¼ˆUnit Testï¼‰ï¼Œå¯æ˜¯å› ç‚ºè€å¸«æ˜¯ C# æˆ°å£«ï¼Œ æ‰€ä»¥æˆ‘å€‘å­¸çš„å°±æ˜¯ç”¨ Visual Studio çš„å…§å»ºæ¸¬è©¦ä¾†æ¸¬ C#ï¼Œä½†æˆ‘åˆä¸å¯« C#ï¼ï¼ æ–¼æ˜¯ä¹ï¼Œé€™å…©å€‹ç¦®æ‹œå°±ç˜‹ç‹‚..."/> <meta name="twitter:image" content="http://blog.wildsky.cc/images/wildsky_main_pic.jpg"/> <title> åœ¨ Code::Blocks é–‹é–‹å¿ƒå¿ƒ Unit Test | ws://wildsky.cc </title> <link rel="shortcut icon" type="image/png" href="/favicon.png"/> <link rel=stylesheet href="/style.css" media=bogus> <link rel=stylesheet href="/syntax.css" media=bogus> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <script>
        (function() {
          var d = document, s = d.createElement('script');
          s.src = 'https://wildsky.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script> </head> <body> <div class=container> <div id=site-header> <nav> <ul> <li><a href="/about/">About</a></li> <li><a href="/fedora/">Fedora</a></li> <li><a href="/subscribe/">Subscribe</a></li> <li><a href="/search/">Search</a></li> </ul> </nav> <header> <div class=site-title><a href="/">ws://wildsky.cc</a></div> <p class=slogan>é¢¨å¹éä»€éº¼æ¨£çš„åœ°æ–¹ï¼Œèº«ä¸Šè‡ªç„¶è€Œç„¶å°±æœƒæœ‰é‚£æ¨£çš„æ°£æ¯ã€‚</p> </header> </div> <div id=main role=main> <article> <div class=content> <h1>åœ¨ Code::Blocks é–‹é–‹å¿ƒå¿ƒ Unit Test</h1> <p>æœ€è¿‘è»Ÿé«”å·¥ç¨‹åœ¨æ•™å–®å…ƒæ¸¬è©¦ï¼ˆUnit Testï¼‰ï¼Œå¯æ˜¯å› ç‚ºè€å¸«æ˜¯ C# æˆ°å£«ï¼Œ æ‰€ä»¥æˆ‘å€‘å­¸çš„å°±æ˜¯ç”¨ Visual Studio çš„å…§å»ºæ¸¬è©¦ä¾†æ¸¬ C#ï¼Œä½†æˆ‘åˆä¸å¯« C#ï¼ï¼ æ–¼æ˜¯ä¹ï¼Œé€™å…©å€‹ç¦®æ‹œå°±ç˜‹ç‹‚åœ°åœ¨ç¶²è·¯ä¸Šæœå°‹ï¼Œä½†éƒ½æ²’æœ‰æ”¶ç©«ï¼ˆæˆ–æ˜¯æˆ‘å¤ªå¼±äº†çœ‹ä¸æ‡‚QwQï¼‰ï¼Œ å¾Œä¾†çµ‚æ–¼åœ¨ Facebook çœ‹åˆ° <a href="http://www.github.com/aigecko/">http://www.github.com/aigecko/</a>æ—é–€å·¦é“ä¹‹ç¥ - å¸«å¤§è²“è€³æ§</a> å­¸é•·çš„å‹•æ…‹ï¼š</p> <blockquote> <p>å°ˆé¡Œå¥½åƒæ„ˆæ”¹æ„ˆç‚¸ æ•ˆèƒ½æ›´æ…˜é‚„å¤šäº†BUG æ–¼æ˜¯æŠŠè»Ÿå·¥çš„Google Testæ‹¿äº†å‡ºä¾†ç”¨ç”¨çœ‹ å…ˆæŠŠå°ˆæ¡ˆçš„linkå’Œsearch pathè¨­å®šå¥½</p> <p>ç„¶å¾Œdefineä¸€å€‹æ¨™ç±¤è®“mainå¯ä»¥è·‘ä¸åŒæ¨¡å¼ å¯ä»¥åªåŸ·è¡Œç¨‹å¼ä¹Ÿå¯ä»¥åªè·‘å–®å…ƒæ¸¬è©¦ ä¸ç„¶BUGæœ‰å¤ é›£æŠ“ å°±ç®—æœ‰gitå¯ä»¥å¹«å¿™å€’å¸¶é‚„æ˜¯å¾ˆé åŒ—</p> </blockquote> <p>å…¶å¯¦ä»–åœ¨æŠ±æ€¨ä»€éº¼æˆ‘å®Œå…¨æ²’çœ‹ï¼Œä½†çœ‹åˆ°å–®å…ƒæ¸¬è©¦é€™å››å€‹å­—æˆ‘å°±æ¬£å–œè‹¥ç‹‚ï¼Œ ç«‹åˆ»å‘ä»–è«‹æ•™ã€Œå¦‚ä½•åœ¨ Code:Blocksã€ä¸Šè·‘å–®å…ƒæ¸¬è©¦çš„æ–¹æ³•ï¼Œ å› æ­¤é€™ç¯‡æ–‡ç« å°±èª•ç”Ÿäº†ï¼</p> <h2>æ­£æ–‡</h2> <h4>ä¸‹è¼‰ &amp; å»ºç½® Gmock</h4> <p>é¦–å…ˆï¼Œå…ˆå»ä¸‹è¼‰ Gmock æœ€æ–°ç‰ˆï¼š<a href="https://code.google.com/p/googlemock/downloads/list">https://code.google.com/p/googlemock/downloads/list</a> ç„¶å¾ŒæŠŠä»–è§£å£“ç¸®åˆ°æ¡Œé¢ï¼Œé–‹å•Ÿ Terminalï¼Œå‰å¾€è©²ç›®éŒ„åº•ä¸‹ï¼Œè¼¸å…¥ä¸‹é¢çš„æŒ‡ä»¤</p> <p><code>./configure</code> ä»–æœƒé–‹å§‹è·‘æ±è¥¿ï¼Œè·‘å®Œå¾Œè¼¸å…¥</p> <p><code>make</code> å¦‚æœæ²’æœ‰éŒ¯èª¤ï¼Œé‚£æœ€æœ€åŸºæœ¬çš„æ­¥é©Ÿå°±å®Œæˆäº†ï¼</p> <h4>å°ˆæ¡ˆè¨­å®š</h4> <p>é–‹å•Ÿ code:blocksï¼Œæ–°å¢ä¸€å€‹æ–°å°ˆæ¡ˆï¼ˆå§‘ä¸”ç¨±ä¹‹ç‚º runTestï¼‰ï¼Œæ¥è‘—åˆ°å·¦é‚Šçš„ icon ä¸ŠæŒ‰å³éµï¼Œé¸æ“‡ Build options&#8230; ï¼Œ å°‡ä½æ–¼è·³å‡ºçš„è¦–çª—ä¸Šæ–¹çš„ tab åˆ‡æ›åˆ° Linker settingï¼Œé€²è¡Œå¦‚ä¸‹çš„è¨­å®šï¼ˆæ³¨æ„ç›¸å°ä½ç½®ï¼‰ï¼Œ æˆ‘æ˜¯ç¿’æ…£å°‡ Gmock è³‡æ–™å¤¾æ”¾åœ¨å°ˆæ¡ˆçš„ä¸Šå±¤ç›®éŒ„ï¼Œæ‰€ä»¥ç›¸å°è·¯å¾‘æœƒé€™æ¨£ï¼Œä½ å¯ä»¥è‡ªè¡Œæ›´å‹•ã€‚</p> <p><a href="http://wildsky.cc/blog-images/2015-11-01-01-55-51-çš„è¢å¹•æ“·åœ–-1024x576.png">Code:Blocks Linker setting</a></p> <p>æ¥è‘—ï¼ŒTab åˆ‡æ›åˆ° Search directoriesï¼ŒåŠ å…¥ä¸‹é¢çš„ä½ç½®ï¼Œä¸€æ¨£è¦æ³¨æ„ç›¸å°ç›®éŒ„ã€‚</p> <p><a href="http://wildsky.cc/blog-images/2015-11-01-01-13-10-çš„è¢å¹•æ“·åœ–-1024x576.png">Code:Blocks Search directories - Compiler</a></p> <p>Sub-tab åˆ‡æ›åˆ° Linker ä¸€æ¨£é€²è¡Œè¨­å®šã€‚</p> <p><a href="http://wildsky.cc/blog-images/2015-11-01-01-13-12-çš„è¢å¹•æ“·åœ–-1024x576.png">Code:Blocks Search directories - Linker</a></p> <p>é€™æ¨£ç’°å¢ƒå°±å·®ä¸å¤šè¨­å®šå®Œæˆäº†ï¼</p> <h4>è·‘ç¬¬ä¸€æ¬¡æ¸¬è©¦</h4> <p>æ–°å¢ä¸€å€‹ main.cpp æª”ï¼Œå…§å®¹è¼¸å…¥å¦‚ä¸‹ï¼š &ldquo;`</p> <h1>include &lt;stdio.h&gt;</h1> <h1>define TEST_MODE 1</h1> <h1>if TEST_MODE==1</h1> <h1>include &quot;gmock/gmock.h&rdquo;</h1> <h1>include &ldquo;gtest/gtest.h&rdquo;</h1> <h1>include &ldquo;Test.h&rdquo;</h1> <h1>endif // TEST_MODE</h1> <h1>if TEST_MODE==1</h1> <p>int main(int argc,char **argv){ ::testing::InitGoogleTest(&amp;argc, argv); return RUN<em>ALL</em>TESTS();</p> <h1>else</h1> <p>int main(){</p> <h1>endif // TEST_MODE</h1> <p>printf(&ldquo;Run Test!\n&rdquo;); return 0; }</p> <h1>include &ldquo;gmock/gmock.h&rdquo;</h1> <h1>include &ldquo;gtest/gtest.h&rdquo;</h1> <p>class Happy : public ::testing::Test{}; TEST<em>F(Happy,UnitTest){ EXPECT</em>EQ(1,1); EXPECT_EQ(1,0); } &ldquo;`</p> <p>é€™æ™‚ï¼ŒæŒ‰ä¸‹ F9 å°±æœƒè·‘æ¸¬è©¦äº†ï¼ï¼ç‚ºäº†è®“æ¸¬è©¦æ˜¯çœŸçš„æœ‰æ•ˆï¼Œæˆ‘å°±çµ¦äº†å…©å€‹æœ€æ˜é¡¯çš„æ¸¬è©¦ï¼Œ1 == 1 ä»¥åŠ 1 == 0ï¼Œæ‰€ä»¥ run å‡ºä¾†çš„çµæœæœƒæœ‰ä¸€å€‹æˆåŠŸä¸€å€‹å¤±æ•—ï¼Œå¦‚ä¸‹åœ–ï¼š</p> <p><a href="http://wildsky.cc/blog-images/2015-11-01-13-47-48-çš„è¢å¹•æ“·åœ–.png">Running First Test</a></p> <p>é€™æ¨£å°±æˆåŠŸè·‘æ¸¬è©¦äº†ï¼å¦‚æœè¦æ¸¬è‡ªå·±å¯«çš„ class çš„æ–¹æ³•ï¼Œå°±ç›´æ¥åƒä¸€èˆ¬çš„å°ˆæ¡ˆé‚£æ¨£ï¼Œåœ¨ test.h ä¸­ include è¦æ¸¬çš„æª”æ¡ˆï¼Œç„¶å¾Œåœ¨ EXPECT_EQ ä¸­è¼¸å…¥è©²è¼¸å…¥æ±è¥¿ï¼Œ å› ç‚ºæˆ‘ä¹Ÿæ˜¯æ˜¨å¤©æ‰å»ºèµ·é€™å€‹ç’°å¢ƒçš„ï¼Œæ‰€ä»¥é‚„éœ€è¦ä¸€é»æ™‚é–“ä¾†æ‘¸ç†Ÿï¼Œå¦‚æœæƒ³çŸ¥é“æ›´å¤šå¯ä»¥å»ç¿»ç¿» Gmock çš„æ–‡ä»¶ã€‚</p> <p>è©±èªªæœ‰ä¸€é»ç¶²è·¯ä¸Šéƒ½æ²’æœ‰æåˆ°ï¼šå¦‚æœæƒ³è¦æ­£å¸¸å»ºç½®ï¼Œåªè¦åœ¨ main.cpp è£¡é¢çš„ç¬¬ 2 è¡ŒæŠŠ <code>#define TEST_MODE 1</code></p> <h2>å¾Œè©±</h2> <p>æœ€è¿‘åœ¨è®€ã€ˆå­¸å¾’æ¨¡å¼ã€‰é€™æœ¬æ›¸ï¼Œæ›¸ä¸­æåˆ°çš„ã€Œè©¢å•èº«é‚Šçš„å°ˆå®¶ã€æ¨¡å¼çœŸçš„å¾ˆå¥½ç”¨ ğŸ˜€</p> <p>å¤§å®¶æœ‰ç©ºå¯ä»¥å»è²·ä¾†è®€è®€ã€‚</p> <h2>ç›¸é—œé€£çµ</h2> <ul> <li>æ—é–€å·¦é“ä¹‹ç¥ &#8211; å¸«å¤§è²“è€³æ§ï¼š<a href="http://www.github.com/aigecko/">http://www.github.com/aigecko/</a></li> <li>gmockï¼š<a href="https://code.google.com/p/googlemock/">https://code.google.com/p/googlemock/</a></li> <li>æˆ‘çš„å®Œæ•´å°ˆæ¡ˆç›®éŒ„ï¼š<a href="https://www.dropbox.com/s/6mnfw18cfemv0k4/runTest.zip?dl=1">https://www.dropbox.com/s/6mnfw18cfemv0k4/runTest.zip?dl=1</a></li> <li>å­¸å¾’æ¨¡å¼ï¼å„ªç§€è»Ÿé«”é–‹ç™¼è€…çš„é¤Šæˆä¹‹è·¯ï¼š<a href="http://www.tenlong.com.tw/items/986276256X?item_id=338410">http://www.tenlong.com.tw/items/986276256X?item_id=338410</a></li> </ul> </div> </article> <div class=switch> <div class=pre> <a href="/posts/ubunu-installation-optimize/">ã€Š ä¸Šä¸€é </a> </div> â˜º <div class=next> <a href="/posts/mozilla-project/">ä¸‹ä¸€é  ã€‹</a> </div> </div> <div id=disqus_thread></div> <noscript>è«‹å•Ÿç”¨ JavaScript ä»¥ä¾¿é–‹å•Ÿ <a href="https://disqus.com/?ref_noscript" rel=nofollow>Disqus</a> çš„ç•™è¨€åŠŸèƒ½ï¼</noscript> </div> </div> <footer> <a href="http://github.com/wildskyf">wildsky</a> <form action="https://www.paypal.com/cgi-bin/webscr" method=post target=_top class=footer-item> <input type=hidden name=cmd value=_s-xclick> <input type=hidden name=hosted_button_id value=92X2FP2T63MTN> <input type=submit border=0 name=submit value=Donate> <img alt="" border=0 src="https://www.paypalobjects.com/zh_TW/i/scr/pixel.gif" width=1 height=1> </form> </footer> <link rel=stylesheet href="/style.css"> <link rel=stylesheet href="/syntax.css"> </body> </html>