{
  "guid": "http://blog.wildsky.cc/?p=609",
  "date": "2019-04-12T22:07:14",
  "slug": "vim-move-line",
  "link": "/posts/vim-move-line/",
  "title": "[Vim Protips] I like to move it &#8211; 上下移動某一行",
  "excerpt": "<p>我的 Vim 有個功能，是從別的編輯器/IDE 抄來的： 按著 Shift 上下移動，就能移動某行程式碼。 選&#8230;</p>\n",
  "feature_image_url": "https://backend.wildsky.cc/wp-content/uploads/2019/04/timothy-meinberg-248173-unsplash-e1555077319408.jpg",
  "content": "\n<p>我的 Vim 有個功能，是從別的編輯器/IDE 抄來的：</p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>按著 Shift 上下移動，就能移動某行程式碼。</p><p>選取 n 行再按著 Shift 上下移動，甚至能一次移動多行。</p></blockquote>\n\n\n\n<p>這樣的好處也很明顯，就不用再 <code>DD</code>（delet a line）然後再 <code>y</code>(yank)，可以直接上下移動該行程式碼，操作速度上快很多，也蠻順手的。</p>\n\n\n\n<!--more-->\n\n\n\n<p>config 裡的設定也很簡單，把這段放在 <code>~/.vimrc</code> 裡面就好。</p>\n\n\n\n<pre class=\"wp-block-code\"><code>\" move line up/down\nnnoremap &lt;S-DOWN> :m .+1&lt;CR>==\nnnoremap &lt;S-UP> :m .-2&lt;CR>==\ninoremap &lt;S-DOWN> &lt;Esc>:m .+1&lt;CR>==gi\ninoremap &lt;S-UP> &lt;Esc>:m .-2&lt;CR>==gi\nvnoremap &lt;S-DOWN> :m '>+1&lt;CR>gv=gv\nvnoremap &lt;S-UP> :m '&lt;-2&lt;CR>gv=gv</code></pre>\n\n\n\n<p>若不想要用 <code>shift</code> 而想要用其他的，就只要把 <code>&lt;S-UP&gt;</code> 和 <code>&lt;S-DOWN&gt;</code> 中的 S 改成對應的字就好，<code>ctrl</code> 是 C，其他我就不太確定了。</p>\n\n\n\n<p>記得之前在研究的時候還有看到很多別種寫法（有的也很 hack，直接 <code>ddjy</code> 之類的XD），我自己測試的結果上面這段是最好用也最穩定的，而且就算是在 insert mode 和 visual mode 也都能運作得很優雅。</p>\n\n\n\n<p>在 visual mode 也能運作的意思就是，我們可以先 <code>shift+v</code> 選取 n 行，再按 <code>shift+up/down</code> 就能一次移動多行，這超級方便的啊。</p>\n\n\n\n<p>另外還有個附加效果：在移動的時候，我的編輯器還會自動幫選中的行進行縮排。有時候要做 beautify 就直接選取然後移上移下就完成了。雖說這效果還不確定是不是因為我的其他設定值所導致的，還沒有去研究，之後再考慮要不要抓時間查看看。</p>\n\n\n\n<p>Update: 後來經過 telegram 的朋友提醒，發現自動進行縮排的是指令後面的 <code>==</code> 的效果。</p>\n\n\n\n<figure class=\"wp-block-embed-youtube wp-block-embed is-type-video is-provider-youtube wp-embed-aspect-4-3 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<span class=\"embed-youtube\" style=\"text-align:center; display: block;\"><iframe class=\"youtube-player\" width=\"640\" height=\"360\" src=\"https://www.youtube.com/embed/VzSdPxlGGZc?version=3&#038;rel=1&#038;showsearch=0&#038;showinfo=1&#038;iv_load_policy=1&#038;fs=1&#038;hl=zh-TW&#038;autohide=2&#038;start=17&#038;wmode=transparent\" allowfullscreen=\"true\" style=\"border:0;\" sandbox=\"allow-scripts allow-same-origin allow-popups allow-presentation\"></iframe></span>\n</div><figcaption>I like to move it move it~</figcaption></figure>\n\n\n\n<h2>其他連結</h2>\n\n\n\n<ul><li>本站其他和 Vim 相關的文章: <a href=\"http://blog.wildsky.cc/tags/vim/\">vim</a></li><li><a href=\"https://www.vim.tw/\">www.vim.tw</a></li><li>Vim Taiwan 的 telegram group:&nbsp;<a href=\"http://t.me/vim_tw\">http://t.me/vim_tw</a></li></ul>\n"
}