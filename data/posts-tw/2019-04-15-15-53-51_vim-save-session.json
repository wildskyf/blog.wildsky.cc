{
  "guid": "http://blog.wildsky.cc/?p=772",
  "date": "2019-04-15T15:53:51",
  "slug": "vim-save-session",
  "link": "/posts/vim-save-session/",
  "title": "[Vim Protips] Save session – 儲存是為了走得更長遠",
  "excerpt": "<p>我的 Vim 有個功能，是某次在觀摩別人的 vimrc 找到的： 按下指定的快捷鍵，就能把當下的 sessio&#8230;</p>\n",
  "feature_image_url": "https://backend.wildsky.cc/wp-content/uploads/2019/04/vidar-nordli-mathisen-558945-unsplash-e1555314821831.jpg",
  "content": "\n<p>我的 Vim 有個功能，是某次在觀摩別人的 vimrc 找到的：</p>\n\n\n\n<blockquote class=\"wp-block-quote\"><p>按下指定的快捷鍵，就能把當下的 session 存下來。</p><p>重新開啟 Vim 之後，只要載入這個 session 就可以回復原本開啟的檔案們，甚至連 layout 都可以還原。</p></blockquote>\n\n\n\n<!--more-->\n\n\n\n<p>config 的設定如下：</p>\n\n\n\n<pre class=\"wp-block-code\"><code>nnoremap &lt;F2> :mksession! ~/.vim_manual_session.vim &lt;CR>\nnnoremap &lt;F3> :source ~/.vim_manual_session.vim &lt;CR></code></pre>\n\n\n\n<p>快捷鍵我習慣用 F2, F3，前者用來儲存，後者用來讀取。</p>\n\n\n\n<p>後面的 <code>~/.vim_manual_session.vim</code> 則是用來記錄 session 的檔案，所以如果有需求的話，可以寫寫 vim script 讓他變成 <code>~/.vim_manual_session_1.vim</code>、<code>~/.vim_manual_session_2.vim</code> 之類有 ID 的形式。</p>\n\n\n\n<p>有些人可能會注意到「欸？有 manual？那是不是有 auto？」。</p>\n\n\n\n<p>嗯沒錯，auto 的設定也蠻簡單的：</p>\n\n\n\n<pre class=\"wp-block-code\"><code>\" key binding\nnnoremap &lt;F4> :source ~/.vim_auto_session.vim &lt;CR>\n\n\" auto script\nautocmd VimLeave * mksession! ~/.vim_auto_session.vim\n\" autocmd VimEnter * source ~/.vim_auto_session.vim</code></pre>\n\n\n\n<p>前半部是設定 F4 為讀取自動儲存的快捷鍵，後半部則有兩個 script：</p>\n\n\n\n<ul><li>前者是「在離開 Vim 時，自動幫我產生 <code>~/.vim_auto_session.vim</code> 進行 session 存檔。」</li><li>後者則是「在進入 Vim 時，自動幫我讀取 <code>~/.vim_auto_session.vim</code> 這個檔案，回復上次離開前的狀態。」</li></ul>\n\n\n\n<p>我自己是不太喜歡自動回復，感覺太自動了。但作為不小心誤關 Vim 的保險，自動在離開時儲存倒是可以開著。</p>\n\n\n\n<p>這些功能我在爬文的時候也有看到有人做成 plugin，但我沒有試過，如果有興趣的可以嘗試看看： <a href=\"https://www.vim.org/scripts/script.php?script_id=3883\">autosess: auto save/load sessions</a></p>\n\n\n\n<h2>其他連結</h2>\n\n\n\n<ul><li>本站其他和 Vim 相關的文章: <a href=\"http://blog.wildsky.cc/tags/vim/\">vim</a></li><li><a href=\"https://vi.stackexchange.com/questions/287/how-to-save-window-split-and-buffer-layout\">How to save window, split, and buffer layout?</a></li><li><a href=\"https://www.vim.tw/\">www.vim.tw</a></li><li>Vim Taiwan 的 telegram group:&nbsp;<a href=\"http://t.me/vim_tw\">http://t.me/vim_tw</a></li><li></li></ul>\n"
}