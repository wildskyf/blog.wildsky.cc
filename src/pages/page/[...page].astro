---
import { getCollection } from 'astro:content'
import { PAGINATION_PER_PAGE_COUNT } from '@/data/globalConfig'
import PaginationPage from '@/components/pageFactory/pagination.astro'
import { articleMapper } from '@/utils'
import { lang } from '@/data/tw.json'

export const getStaticPaths = async ({ paginate }) => {
  const allPost = await getCollection(`posts-${lang}`)

  return paginate(
    allPost
      .map(articleMapper)
      .sort((a,b) => b.date - a.date),
    {
      pageSize: PAGINATION_PER_PAGE_COUNT
    }
  )
}

const { page } = Astro.props

---

<PaginationPage
  lang={lang}
  page={page}
/>
