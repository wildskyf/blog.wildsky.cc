---
import HeaderLink from '@/components/HeaderLink.astro'
import main_menu_items_tw from '@/data/main-tw.json'
import main_menu_items_en from '@/data/main-en.json'

const menu_items_mapping = {
  tw: main_menu_items_tw,
  en: main_menu_items_en
}

const { lang } = Astro.props
const homepage_link = lang === 'en' ? { label: '中文', path: '/' } : { label: 'english', path: '/en/' }
const pages = menu_items_mapping[lang]?.filter(item => !['Languages'].includes(item.title)) ?? []

---
<nav class='flex flex-col justify-center items-center w-full lg:w-auto select-none'>
  <label
    for='menu-toggler'
    class='inline-block lg:hidden px-4 py-2 border-2 border-solid text-gray-200 border-gray-200'
  >
      Menu
  </label>

  <input class='hidden' type='checkbox' id='menu-toggler' />
  <ul
    id='menu'
    class={`
      flex
      capitalize text-center w-full lg:w-auto
      justify-center items-center
      flex-col lg:flex-row max-lg:flex-wrap
    `}
  >
    {
      pages.map(item => {
        return (
          <li key={item.guid} class={`
              w-2/3 lg:w-full
          `}>
            <HeaderLink
              href={item.url}
              class={`
                w-full
                text-md font-thin px-2 py-3 lg:py-0 mx-1 cursor-pointer block
                border-b-2 lg:border-b-0 border-gray-200 border-solid
              `}
            >
              {item.title}
            </HeaderLink>
          </li>
        )
      })
    }
    <li class={`
        w-2/3 lg:w-full
    `}>
      <HeaderLink
        href={homepage_link.path}
        class={`
          text-sm font-thin px-3 py-3 mx-1 cursor-pointer w-full block
          border-b-2 lg:border-b-0 border-gray-200 border-solid
        `}
      >
        {homepage_link.label}
      </HeaderLink>
    </li>
  </ul>
</nav>

<style>
  @media screen and (max-width: 1023px) {
    #menu {
      display: none;
    }

    #menu-toggler:checked + #menu{
      display: flex;
    }
  }
</style>
